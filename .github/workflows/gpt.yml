name: Deploy to IIS

on:
  push:
    branches:
      [ master ]


jobs:
  build-and-deploy:
    runs-on: windows-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Setup MSBuild
      uses: microsoft/setup-msbuild@v1.0.2

    - name: Restore NuGet packages
      run: nuget restore YourSolution.sln

    - name: Build
      run: msbuild DevingOps.sln /p:Configuration=Release

    - name: Publish to IIS
      run: |
        # Publish the project to a directory
        msbuild /p:Configuration=Release /t:Publish DevingOps.csproj

        # Replace 'C:\Your\IIS\Path' with the actual path of your IIS web application
        xcopy /E /I /Y "DevingOps\bin\Release\PublishOutput\*" "C:\www\gh-cd-demo.com"

# Daha fazla adım ekleyebilirsiniz, örneğin testler, paket oluşturma, bildirimler vb.
